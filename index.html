<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Family Pixel Calendar</title>
    <base target="_top">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <style>
    :root {
        /* Palette based on reference image */
        --bg-color: #2d2b45;
        /* Dark purple background */
        --header-bg: #87CEEB;
        /* Sky blue matching image */
        --text-color: #ffffff;
        --accent-yellow: #fecb6e;
        --grid-bg: #3b3b55;
        --cell-bg: #4a4a6a;
        --cell-border-light: #6c6c8e;
        --cell-border-dark: #2a2a3e;
        --nav-bg: #2d2b45;

        /* Button/Interactive colors */
        --btn-purple: #8e44ad;
        --btn-yellow: #f1c40f;
        --btn-orange: #d35400;

        --shadow-color: rgba(0, 0, 0, 0.5);
    }

    * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    @font-face {
        font-family: 'NeoDunggeunmo';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    body {
        margin: 0;
        padding: 0;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: 'Press Start 2P', monospace;
        /* Reverted to Pixel Font */
        font-size: 12px;
        /* Reverted size */
        height: 100vh;
        overflow: hidden;
        /* App-like feel */
    }

    /* Scoped Font for Popups */
    .pixel-box,
    .pixel-btn,
    .pixel-input,
    .confirm-box,
    .modal-content,
    .day-modal-header,
    .modal-header h2 {
        font-family: 'NeoDunggeunmo', monospace !important;
    }

    #app-container {
        width: 100vw; /* ì „ì²´ í™”ë©´ ë„ˆë¹„ */
        max-width: 100vw;
        margin: 0;
        height: 100vh; /* ì „ì²´ í™”ë©´ ë†’ì´ */
        background-color: var(--bg-color);
        display: flex;
        flex-direction: column;
        border-left: 4px solid #1a1a2e;
        border-right: 4px solid #1a1a2e;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #2d2b45;
    }

    ::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
    }

    /* utilities */
    .hidden {
        display: none !important;
    }

    .full-width {
        width: 100%;
    }

    /* Header Section */
    .header-section {
        position: relative;
        height: 120px;
        /* Background image moved to pseudo-element for opacity */
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        padding: 0 20px;
        overflow: hidden;
        /* Contain pseudo-element */
    }

    /* Pseudo-element for Opacity 80% Background */
    .header-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        opacity: 0.8;
        /* 80% opacity */
        z-index: 0;
        /* Behind content */
    }

    /* Family Photo Container */
    .family-photo-container {
        position: absolute;
        right: 0px;
        /* STRICTLY 0px as requested "closely attached" */
        bottom: 0px;
        height: 110px;
        z-index: 1;
        /* Above background */
    }

    .family-photo {
        height: 100%;
        width: auto;
        filter: drop-shadow(-4px 4px 0 rgba(0, 0, 0, 0.5));
        /* Shadow direction flip */
    }

    .month-title {
        font-family: 'Press Start 2P', cursive; /* ì›ë˜ í”½ì…€ í°íŠ¸ë¡œ ë³µêµ¬ */
        font-size: 1.5rem;
        font-weight: bold; /* í°íŠ¸ ë‘ê»˜ ì¦ê°€ */
        color: #ffffff;
        text-transform: uppercase;
        text-shadow:
            3px 3px 0 #000,
            -1px -1px 0 #000,
            1px -1px 0 #000,
            -1px 1px 0 #000,
            1px 1px 0 #000;
        margin: 0;
        letter-spacing: 0.5px; /* ìê°„ ì¢ê²Œ ìœ ì§€ */
        position: relative;
        z-index: 2;
        /* Above background */
        text-align: left;
        /* Left align text */
        line-height: 1.5;
        white-space: pre-wrap;
        cursor: pointer;
    }

    .month-title:hover {
        transform: scale(1.05);
        color: var(--accent-yellow);
    }

    .year-subtitle {
        display: none;
    }

    /* Calendar Grid Container */
    .calendar-container {
        flex-grow: 1;
        background-color: var(--bg-color);
        padding: 0;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }

    .calendar-frame {
        background-color: transparent;
        border: none;
        border-radius: 0;
        padding: 2px;
        /* Reduced to 2px to maximize width */
        box-shadow: none;
        flex-grow: 1;
    }

    .week-header {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        margin-bottom: 5px;
    }

    .week-day {
        text-align: center;
        color: var(--accent-yellow);
        font-size: 0.8rem;
        /* Reverted size */
        padding: 5px 0;
        text-shadow: 1px 1px 0 #000;
        font-family: 'Press Start 2P', monospace;
        /* Reverted */
    }

    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 1px; /* ê°„ê²© ë” ì¢í˜ */
        /* Ensure background doesn't hide gaps */
        background-color: transparent;
    }

    .day-cell {
        height: 98px; /* ì„¸ë¡œí­ 2px ì¤„ì„ */
        min-height: 98px;
        background-color: var(--cell-bg);
        /* Force high contrast borders */
        border-top: 2px solid #6c6c8e;
        border-left: 2px solid #6c6c8e;
        border-right: 2px solid #2a2a3e;
        border-bottom: 2px solid #2a2a3e;
        border-radius: 4px;
        /* Slightly rounded corners */
        display: block;
        padding: 4px 2px 2px; /* í•˜ë‹¨ íŒ¨ë”© 2pxë¡œ ë³€ê²½ */
        cursor: pointer;
        position: relative;
        box-shadow: 2px 2px 0 #000;
        overflow: hidden;
    }

    .day-cell.today {
        border: 1px solid #fff; /* ì–‡ì€ í•˜ì–€ìƒ‰ í…Œë‘ë¦¬ */
    }

    /* ìš”ì¼ë³„ ë‚ ì§œ ìˆ«ì ìƒ‰ìƒ */
    .day-cell .day-number.saturday {
        color: #3498db; /* íŒŒë€ìƒ‰ (í† ìš”ì¼) */
    }

    .day-cell .day-number.sunday {
        color: #e74c3c; /* ë¶‰ì€ìƒ‰ (ì¼ìš”ì¼) */
    }

    .pixel-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        border-image: linear-gradient(to bottom, #dedede, #666) 1;
        padding: 20px;
        width: 95%;
        /* Wider */
        max-width: 460px;
        /* Wider to match container */
        box-shadow: 8px 8px 0 #000;
    }

    .day-preview-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: clip;
        font-size: 13px;
        /* Increased to fill width */
        margin-bottom: 2px;
        line-height: 1.2;
    }

    .day-cell:active {
        border-top: 2px solid var(--cell-border-dark);
        border-left: 2px solid var(--cell-border-dark);
        border-right: 2px solid var(--cell-border-light);
        border-bottom: 2px solid var(--cell-border-light);
        transform: translateY(1px);
    }

    .day-cell.empty {
        background: transparent;
        border: none;
        cursor: default;
        box-shadow: none;
        padding: 0;
        pointer-events: none;
    }

    .day-number {
        font-size: 9px;
        color: #fff;
        text-shadow: 1px 1px 0 #000;
        margin-bottom: 4px; /* ì¼ì ìˆ«ì í•˜ë‹¨ ê°„ê²© 4px */
    }

    /* Small Label for Header (YEAR/MONTH) */
    .small-label {
        font-size: 0.6em;
        /* Reverted */
    }

    /* Bottom Navigation Removed - Hiding */
    .bottom-nav {
        display: none !important;
    }

    .nav-btn {
        width: 48px;
        height: 48px;
        background-color: var(--cell-bg);
        border: 2px solid #000;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 4px 0 #000;
        transition: transform 0.1s;
    }

    .nav-btn:active {
        transform: translateY(4px);
        box-shadow: 0 0 0 #000;
    }

    .nav-icon {
        font-size: 1.2rem;
    }

    /* Specific Button Styles */
    .btn-calendar {
        background-color: #eebbba;
    }

    /* Pinkish */
    .btn-list {
        background-color: #dcd6f7;
    }

    /* Lavender */
    .btn-settings {
        background-color: #95a5a6;
    }

    /* Grey */
    .btn-add {
        background-color: #f39c12;
    }

    /* Orange */

    /* Modals - keeping existing structure but updating style */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        backdrop-filter: blur(2px);
    }

    .pixel-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        border-image: linear-gradient(to bottom, #dedede, #666) 1;
        padding: 20px;
        width: 95%;
        max-width: 400px; /* ê¸°ë³¸ íŒì—… í¬ê¸° ë³µì› */
        box-shadow: 8px 8px 0 #000;
    }

    /* ì‚¬ìš©ì ë“±ë¡ íŒì—…ë§Œ í¬ê¸° ì¶•ì†Œ */
    #registrationModal .pixel-box {
        max-width: 200px; /* ì‚¬ìš©ì ë“±ë¡ íŒì—…ë§Œ ê°€ë¡œí­ ì ˆë°˜ */
    }

    .pixel-btn {
        font-family: 'NeoDunggeunmo', monospace;
        /* Kept for Consistency in Popups? Or should revert? User said 'popup font change ONLY'. Buttons are mostly in Popups, but Nav are buttons too? Nav is div.btn. Registration is popup. Add Event is popup. Confirm is popup. */
        /* Wait, if I revert body, I should explicitly set Neo for buttons if they are in popups. But generic .pixel-btn is used in popups. */
        background: var(--btn-purple);
        border: 2px solid #fff;
        color: white;
        padding: 10px;
        box-shadow: 4px 4px 0 #000;
        cursor: pointer;
    }

    .pixel-btn:active {
        box-shadow: 0 0 0 #000;
        transform: translate(4px, 4px);
    }

    .pixel-btn:disabled {
        background: #666; /* íšŒìƒ‰ ë°°ê²½ */
        color: #aaa; /* íšŒìƒ‰ í…ìŠ¤íŠ¸ */
        cursor: not-allowed; /* ì»¤ì„œ ë³€ê²½ */
        opacity: 0.6; /* íˆ¬ëª…ë„ */
    }

    .pixel-input {
        font-family: 'NeoDunggeunmo', monospace;
        background: #1a1a2e;
        border: 2px solid #555;
        color: white;
        padding: 8px;
        width: 100%;
        margin-top: 5px;
        font-size: 14px;
    }

    .photo-options {
        display: flex;
        gap: 10px;
        margin-top: 5px;
    }

    .photo-btn {
        background: #4a4a6a;
        border: 2px solid #fff;
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        box-shadow: 2px 2px 0 #000;
    }

    .photo-btn:hover {
        background: #5a5a7a;
    }

    .photo-btn:active {
        box-shadow: 0 0 0 #000;
        transform: translate(2px, 2px);
    }

    /* Modal content centering */
    .modal-content {
        text-align: center; /* ë©”ë‰´ë“¤ ê°€ìš´ë° ì •ë ¬ */
    }

    /* Input group layout */
    .input-group {
        margin-bottom: 20px;
        text-align: left;
        display: block;
        width: 160px; /* ì €ì¥í•˜ê¸° ë²„íŠ¼ê³¼ ë™ì¼í•œ ê°€ë¡œí­ ì œí•œ */
    }

    .input-group label {
        display: block;
        margin-bottom: 8px; /* ë ˆì´ë¸”ê³¼ ì…ë ¥ í•„ë“œ ì‚¬ì´ ê°„ê²© */
    }

    .input-group .file-upload-wrapper {
        text-align: left; /* ì‚¬ì§„ ì˜µì…˜ë“¤ë„ ì¢Œì¸¡ ì •ë ¬ */
    }

    /* Name input width */
    .name-input {
        width: 150px; /* ê°€ë¡œí­ 10px ëŠ˜ë¦¼ */
    }

    /* Photo preview styling */
    .photo-preview-box {
        display: block;
        width: 150px; /* ê°€ë¡œí­ 10px ëŠ˜ë¦¼ */
        height: 120px;
        border: 2px solid #555;
        border-radius: 8px;
        background-color: #1a1a2e;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        margin: 10px 0 0;
        text-align: center;
        line-height: 120px;
        color: #888;
        font-size: 10px;
    }

    /* --- Day Modal: List View Styles --- */
    .day-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 4px solid #fff;
        padding-bottom: 10px;
    }

    .day-modal-date {
        font-size: 1.2rem;
        color: var(--accent-yellow);
    }

    .event-list-container {
        max-height: none; /* ë°˜ì‘í˜• ë†’ì´ */
        overflow-y: visible; /* ìŠ¤í¬ë¡¤ ì œê±° */
    }

    .event-item {
        background: rgba(0, 0, 0, 0.2);
        margin-bottom: 8px;
        padding: 8px;
        border: 2px solid transparent;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .event-item.active {
        border-color: var(--accent-yellow);
        background: rgba(255, 255, 255, 0.1);
    }

    .event-info {
        flex-grow: 1;
    }

    .event-actions {
        display: none;
        /* Hidden by default */
        gap: 8px;
    }

    .event-item.active .event-actions {
        display: flex;
        animation: fadeIn 0.2s;
    }

    .action-icon {
        cursor: pointer;
        font-size: 1.2rem;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    /* Confirm Modal */
    .confirm-overlay {
        position: absolute;
        /* Relative to app container or fixed */
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 200;
    }

    .confirm-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        padding: 20px;
        text-align: center;
        box-shadow: 8px 8px 0 #000;
    }

    /* Event Form Styles */
    .event-form-group {
        margin-bottom: 15px;
        text-align: left;
    }

    .event-form-label {
        display: block;
        color: var(--accent-yellow);
        margin-bottom: 5px;
        font-size: 0.8rem;
        font-weight: normal;
        /* Reduce thickness key */
        text-shadow: none;
        /* Remove shadow to make it look thinner */
    }

    .date-time-row {
        display: flex;
        gap: 5px;
    }

    .date-time-row input {
        width: 50%;
    }

    /* Color Picker: 5 columns for 10 items = 2 rows */
    .color-picker-container {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        justify-items: center;
        gap: 8px;
        margin-top: 5px;
    }

    .color-option {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 2px solid #fff;
        cursor: pointer;
        box-shadow: 2px 2px 0 #000;
    }

    .color-option.selected {
        border-color: #000;
        box-shadow: 0 0 0 2px #fff inset;
        transform: scale(1.1);
    }

    /* Alarm Input */
    .alarm-input-wrapper {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
    }

    .alarm-input {
        width: 60px;
        text-align: center;
    }

    .alarm-input:disabled {
        background-color: #333;
        color: #777;
        border-color: #444;
        cursor: not-allowed;
    }

    .modal-header {
        display: flex;
        justify-content: space-between; /* ì¢Œìš° ì •ë ¬ */
        align-items: center;
        margin-bottom: 20px;
    }

    #eventAlarmToggle {
        transform: scale(1.5);
        /* 2px bigger roughly 1.5x from default */
        margin-left: 5px;
        /* Closer to text */
        cursor: pointer;
    }

    /* Calendar Card Event List Items */
    .day-preview-list {
        list-style: none;
        padding: 0;
        margin: 1px 0 0 0; /* ê°„ê²© ì•½ê°„ ì¤„ì„ */
    }

    .day-preview-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: clip;
        /* We truncate manually to 5 chars, but this is safety */
        font-family: 'NeoDunggeunmo', monospace;
        font-size: 9px; /* í°íŠ¸ ì‚¬ì´ì¦ˆ 9px */
        font-weight: 200; /* êµµê¸° ë” ì¤„ì„ */
        margin-bottom: 1px;
        line-height: 1.2;
        /* ë°°ê²½ìƒ‰ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì • */
        padding: 1px 3px 1px 2px; /* ì¢Œì¸¡ íŒ¨ë”© 2px */
        border-radius: 2px;
        width: 100%; /* ì¼ë³„ ì¹´ë“œ ì „ì²´ ê°€ë¡œí­ ì‚¬ìš© */
        box-sizing: border-box; /* íŒ¨ë”© í¬í•¨í•œ ì „ì²´ í¬ê¸° */
        letter-spacing: -0.7px; /* ìê°„ ë” ì¢í˜ */
        text-align: center; /* í…ìŠ¤íŠ¸ ê°€ìš´ë° ì •ë ¬ */
        text-align: left; /* í…ìŠ¤íŠ¸ ì¢Œì¸¡ ì •ë ¬ */
    }

    .more-events-label {
        font-size: 8px;
        color: #8B008B; /* ì§™ì€ ìì£¼ìƒ‰ */
        margin-top: 2px;
        text-align: right;
    }
    </style>
    <!-- Google Fonts: Press Start 2P for pixel header -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>

<body>

    <div id="app-container">
        <!-- 1. Castle Header Section -->
        <header class="header-section" id="headerSection">
            <div class="family-photo-container" id="familyPhotoContainer" style="display:none;">
                <img src="" alt="Family" class="family-photo" id="familyPhotoImg">
            </div>
            <h1 class="month-title" id="currentDateDisplay">2026<span class="small-label">YEAR</span><br>1<span
                    class="small-label">MONTH</span></h1>
            <!-- Arrow controls and User Status REMOVED -->
        </header>
        
        <script>
            // GAS Template logic removed for frontend compatibility
            // Header BG and Family Photo initialization should be handled via API data if needed.
        </script>

        <!-- 2. Main Content (Calendar) -->
        <div class="calendar-container">
            <div class="calendar-frame">
                <!-- Week Headers -->
                <div class="week-header">
                    <div class="week-day">SUN</div>
                    <div class="week-day">MON</div>
                    <div class="week-day">TUE</div>
                    <div class="week-day">WED</div>
                    <div class="week-day">THU</div>
                    <div class="week-day">FRI</div>
                    <div class="week-day">SAT</div>
                </div>

                <!-- Days Grid -->
                <div id="calendarGrid" class="calendar-grid">
                    <!-- Days will be generated by JS -->
                </div>
            </div>
        </div>

        <!-- 3. Bottom Navigation Bar REMOVED -->
        <nav class="bottom-nav" style="display:none;">
        </nav>

        <!-- Modals (Overlay) -->
        <!-- Registration Popup -->
        <div id="registrationModal" class="modal-overlay hidden">
            <div class="modal-box pixel-box">
                <div class="modal-header">
                    <h2>[ ì‚¬ìš©ìë“±ë¡ ]</h2>
                </div>
                <div class="modal-content">
                    <div class="input-group">
                        <label>ì‚¬ìš©ìì´ë¦„ :</label>
                        <input type="text" id="regName" class="pixel-input name-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="input-group">
                        <label>ì‚¬ì§„ë“±ë¡ :</label>
                        <div class="file-upload-wrapper">
                            <input type="file" id="regPhotoFile" accept="image/*" class="pixel-input-file"
                                style="display:none;" capture="environment">
                            <input type="file" id="regPhotoAlbum" accept="image/*" class="pixel-input-file"
                                style="display:none;">
                            <div class="photo-options">
                                <button type="button" id="cameraBtn" class="photo-btn" title="ì¹´ë©”ë¼ ì´¬ì˜">
                                    ğŸ“·
                                </button>
                                <button type="button" id="albumBtn" class="photo-btn" title="ì•¨ë²”ì—ì„œ ì„ íƒ">
                                    ğŸ“
                                </button>
                            </div>
                            <label id="photoPreview" class="photo-preview-box">
                                ì‚¬ì§„ì„ ë“±ë¡í•´ì£¼ì„¸ìš”
                            </label>
                        </div>
                        <input type="hidden" id="regPhotoBase64">
                    </div>
                    <button id="saveUserBtn" class="pixel-btn primary full-width" disabled>ì €ì¥í•˜ê¸°</button>
                </div>
            </div>
        </div>

        <!-- Day View List Popup -->
        <div id="dayModal" class="modal-overlay hidden">
            <div class="modal-box pixel-box">
                <div class="day-modal-header">
                    <span id="dayModalDate" class="day-modal-date">DATE</span>
                    <div style="display:flex; gap:10px;">
                        <button id="headerAddBtn" class="pixel-btn-small" style="font-size:1.2rem;">+</button>
                        <button class="close-btn pixel-btn-small">X</button>
                    </div>
                </div>
                <div class="modal-content">
                    <!-- Events List -->
                    <div class="event-list-container">
                        <ul id="dayEventList" style="list-style:none; padding:0; margin:0;">
                            <!-- Events injected by JS -->
                        </ul>
                    </div>
                    <!-- Empty State Message -->
                    <div id="emptyListMsg" style="display:none; text-align:center; padding:20px; color:#aaa;">
                        NO QUESTS YET
                    </div>
                </div>
            </div>
        </div>

        <!-- Add/Edit Event Overlay (Separate Modal) -->
        <div id="eventEditorModal" class="modal-overlay hidden" style="z-index: 150;">
            <div class="modal-box pixel-box">
                <div class="modal-header">
                    <h2 id="editorTitle">ì¼ì • ë“±ë¡</h2>
                    <button id="closeEditorBtn" class="pixel-btn-small">X</button>
                </div>
                <div class="modal-content">
                    <div class="add-event-section">
                        <div class="event-form-group">
                            <label class="event-form-label">ì¼ì • ë‚´ìš©</label>
                            <input type="text" id="eventTitleInput" class="pixel-input" style="height:40px;" placeholder="ì¼ì • ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”">
                        </div>

                        <div class="event-form-group">
                            <label class="event-form-label">ì‹œì‘ ì¼ì‹œ</label>
                            <div class="date-time-row">
                                <input type="date" id="eventStartDate" class="pixel-input" style="font-size:18px; letter-spacing:-0.5px;">
                                <input type="time" id="eventStartTime" class="pixel-input" style="font-size:18px; letter-spacing:-0.5px;">
                            </div>
                        </div>

                        <div class="event-form-group">
                            <label class="event-form-label">ì¢…ë£Œ ì¼ì‹œ</label>
                            <div class="date-time-row">
                                <input type="date" id="eventEndDate" class="pixel-input" style="font-size:18px; letter-spacing:-0.5px;">
                                <input type="time" id="eventEndTime" class="pixel-input" style="font-size:18px; letter-spacing:-0.5px;">
                            </div>
                        </div>

                        <div class="event-form-group">
                            <label class="event-form-label">ë¼ë²¨ ìƒ‰ìƒ</label>
                            <div class="color-picker-container" id="eventColorPicker">
                                <!-- Colors injected by JS -->
                            </div>
                            <input type="hidden" id="eventColorInput" value="#9b59b6">
                        </div>

                        <div class="event-form-group">
                            <label class="event-form-label"
                                style="display:flex; justify-content:flex-start; align-items:center; gap:5px;">
                                <span>ì•ŒëŒ ì„¤ì •</span>
                                <input type="checkbox" id="eventAlarmToggle" style="margin:0; margin-left:5px;">
                            </label>
                            <div class="alarm-input-wrapper" id="alarmWrapper">
                                <span>ì‹œì‘ ì‹œê°„</span>
                                <input type="number" id="eventAlarmInput" class="pixel-input alarm-input" value="10">
                                <span>ë¶„ ì „</span>
                            </div>
                        </div>

                        <input type="hidden" id="editEventId"> <!-- For updates -->

                        <button id="saveEventBtn" class="pixel-btn primary full-width">ì¼ì • ì¶”ê°€</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirm Delete Modal (Z-Index 200) -->
        <div id="confirmDeleteModal" class="confirm-overlay hidden">
            <div class="confirm-box">
                <p style="margin-bottom:20px; font-size:1.1rem; line-height:1.5;">ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <div style="display:flex; justify-content:center; gap:15px;">
                    <button id="confirmDeleteYes" class="pixel-btn" style="background:var(--btn-orange);">ì‚­ì œ</button>
                    <button id="confirmDeleteNo" class="pixel-btn" style="background:#555;">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>

        <!-- Date Picker Modal -->
        <div id="datePickerModal" class="modal-overlay hidden">
            <div class="modal-box pixel-box">
                <div class="modal-header">
                    <h2>TIME TRAVEL</h2>
                    <button class="close-btn pixel-btn-small">X</button>
                </div>
                <div class="modal-content" style="text-align:center;">
                    <div style="margin-bottom:20px; display:flex; align-items:center; justify-content:center; gap:15px;">
                        <select id="yearSelect" class="pixel-input" style="font-size:18px; text-align:center; flex:1; letter-spacing:-0.5px;">
                            <!-- JS will populate -->
                        </select>
                        <select id="monthSelect" class="pixel-input" style="font-size:18px; text-align:center; flex:1; letter-spacing:-0.5px;">
                            <!-- JS will populate -->
                        </select>
                    </div>
                    <div style="display:flex; justify-content:center; gap:10px;">
                        <button id="resetDateBtn" class="pixel-btn" style="flex:1; background:#555;">ì´ˆê¸°í™”</button>
                        <button id="confirmDateBtn" class="pixel-btn primary" style="flex:1;">ì„ íƒ</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Hidden data containers -->
    <div id="initialEventsData" style="display:none;">
        [{"date":"2026-01-17","title":"Test Event","color":"red","alarmMinutes":10}]
    </div>
    <div id="initialUsersData" style="display:none;">
        [{"uuid":"test-user","name":"Test User","photo":""}]
    </div>

    <script src="https://damn090909-boop.github.io/family-calendar/scripts.js"></script>
</body>

</html>