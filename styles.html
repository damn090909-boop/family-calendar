<style>
    :root {
        /* Palette based on reference image */
        --bg-color: #2d2b45;
        /* Dark purple background */
        --header-bg: #87CEEB;
        /* Sky blue matching image */
        --text-color: #ffffff;
        --accent-yellow: #fecb6e;
        --grid-bg: #3b3b55;
        --cell-bg: #4a4a6a;
        --cell-border-light: #6c6c8e;
        --cell-border-dark: #2a2a3e;
        --nav-bg: #2d2b45;

        /* Button/Interactive colors */
        --btn-purple: #8e44ad;
        --btn-yellow: #f1c40f;
        --btn-orange: #d35400;

        --shadow-color: rgba(0, 0, 0, 0.5);
    }

    * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    @font-face {
        font-family: 'NeoDunggeunmo';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    body {
        margin: 0;
        padding: 0;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: 'Press Start 2P', monospace;
        /* Reverted to Pixel Font */
        font-size: 12px;
        /* Reverted size */
        height: 100vh;
        overflow: hidden;
        /* App-like feel */
    }

    /* Scoped Font for Popups */
    .pixel-box,
    .pixel-btn,
    .pixel-input,
    .confirm-box,
    .modal-content,
    .day-modal-header,
    .modal-header h2 {
        font-family: 'NeoDunggeunmo', monospace !important;
    }

    #app-container {
        width: 100vw; /* 전체 화면 너비 */
        max-width: 100vw;
        margin: 0;
        height: 100vh; /* 전체 화면 높이 */
        background-color: var(--bg-color);
        display: flex;
        flex-direction: column;
        border-left: 4px solid #1a1a2e;
        border-right: 4px solid #1a1a2e;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #2d2b45;
    }

    ::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
    }

    /* utilities */
    .hidden {
        display: none !important;
    }

    .full-width {
        width: 100%;
    }

    /* Header Section */
    .header-section {
        position: relative;
        height: 120px;
        /* Background image moved to pseudo-element for opacity */
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        padding: 0 20px;
        overflow: hidden;
        /* Contain pseudo-element */
    }

    /* Pseudo-element for Opacity 80% Background */
    .header-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        opacity: 0.8;
        /* 80% opacity */
        z-index: 0;
        /* Behind content */
    }

    /* Family Photo Container */
    .family-photo-container {
        position: absolute;
        right: 0px;
        /* STRICTLY 0px as requested "closely attached" */
        bottom: 0px;
        height: 110px;
        z-index: 1;
        /* Above background */
    }

    .family-photo {
        height: 100%;
        width: auto;
        filter: drop-shadow(-4px 4px 0 rgba(0, 0, 0, 0.5));
        /* Shadow direction flip */
    }

    .month-title {
        font-family: 'Press Start 2P', cursive; /* 원래 픽셀 폰트로 복구 */
        font-size: 1.5rem;
        font-weight: bold; /* 폰트 두께 증가 */
        color: #ffffff;
        text-transform: uppercase;
        text-shadow:
            3px 3px 0 #000,
            -1px -1px 0 #000,
            1px -1px 0 #000,
            -1px 1px 0 #000,
            1px 1px 0 #000;
        margin: 0;
        letter-spacing: 0.5px; /* 자간 좁게 유지 */
        position: relative;
        z-index: 2;
        /* Above background */
        text-align: left;
        /* Left align text */
        line-height: 1.5;
        white-space: pre-wrap;
        cursor: pointer;
    }

    .month-title:hover {
        transform: scale(1.05);
        color: var(--accent-yellow);
    }

    .year-subtitle {
        display: none;
    }

    /* Calendar Grid Container */
    .calendar-container {
        flex-grow: 1;
        background-color: var(--bg-color);
        padding: 0;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }

    .calendar-frame {
        background-color: transparent;
        border: none;
        border-radius: 0;
        padding: 2px;
        /* Reduced to 2px to maximize width */
        box-shadow: none;
        flex-grow: 1;
    }

    .week-header {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        margin-bottom: 5px;
    }

    .week-day {
        text-align: center;
        color: var(--accent-yellow);
        font-size: 0.8rem;
        /* Reverted size */
        padding: 5px 0;
        text-shadow: 1px 1px 0 #000;
        font-family: 'Press Start 2P', monospace;
        /* Reverted */
    }

    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 1px; /* 간격 더 좁힘 */
        /* Ensure background doesn't hide gaps */
        background-color: transparent;
    }

    .day-cell {
        height: 98px; /* 세로폭 2px 줄임 */
        min-height: 98px;
        background-color: var(--cell-bg);
        /* Force high contrast borders */
        border-top: 2px solid #6c6c8e;
        border-left: 2px solid #6c6c8e;
        border-right: 2px solid #2a2a3e;
        border-bottom: 2px solid #2a2a3e;
        border-radius: 4px;
        /* Slightly rounded corners */
        display: block;
        padding: 4px 2px 2px; /* 하단 패딩 2px로 변경 */
        cursor: pointer;
        position: relative;
        box-shadow: 2px 2px 0 #000;
        overflow: hidden;
    }

    .day-cell.today {
        border: 1px solid #fff; /* 얇은 하얀색 테두리 */
    }

    /* 요일별 날짜 숫자 색상 */
    .day-cell .day-number.saturday {
        color: #3498db; /* 파란색 (토요일) */
    }

    .day-cell .day-number.sunday {
        color: #e74c3c; /* 붉은색 (일요일) */
    }

    /* ... omitted ... */

    .pixel-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        border-image: linear-gradient(to bottom, #dedede, #666) 1;
        padding: 20px;
        width: 95%;
        /* Wider */
        max-width: 460px;
        /* Wider to match container */
        box-shadow: 8px 8px 0 #000;
    }

    /* ... omitted ... */

    .day-preview-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: clip;
        font-size: 13px;
        /* Increased to fill width */
        margin-bottom: 2px;
        line-height: 1.2;
    }

    .day-cell:active {
        border-top: 2px solid var(--cell-border-dark);
        border-left: 2px solid var(--cell-border-dark);
        border-right: 2px solid var(--cell-border-light);
        border-bottom: 2px solid var(--cell-border-light);
        transform: translateY(1px);
    }

    .day-cell.empty {
        background: transparent;
        border: none;
        cursor: default;
        box-shadow: none;
        padding: 0;
        pointer-events: none;
    }

    .day-number {
        font-size: 9px;
        color: #fff;
        text-shadow: 1px 1px 0 #000;
        margin-bottom: 4px; /* 일자 숫자 하단 간격 4px */
    }

    /* Small Label for Header (YEAR/MONTH) */
    .small-label {
        font-size: 0.6em;
        /* Reverted */
    }

    /* Bottom Navigation Removed - Hiding */
    .bottom-nav {
        display: none !important;
    }



    .nav-btn {
        width: 48px;
        height: 48px;
        background-color: var(--cell-bg);
        border: 2px solid #000;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 4px 0 #000;
        transition: transform 0.1s;
    }

    .nav-btn:active {
        transform: translateY(4px);
        box-shadow: 0 0 0 #000;
    }

    .nav-icon {
        font-size: 1.2rem;
    }

    /* Specific Button Styles */
    .btn-calendar {
        background-color: #eebbba;
    }

    /* Pinkish */
    .btn-list {
        background-color: #dcd6f7;
    }

    /* Lavender */
    .btn-settings {
        background-color: #95a5a6;
    }

    /* Grey */
    .btn-add {
        background-color: #f39c12;
    }

    /* Orange */

    /* Modals - keeping existing structure but updating style */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        backdrop-filter: blur(2px);
    }

    .pixel-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        border-image: linear-gradient(to bottom, #dedede, #666) 1;
        padding: 20px;
        width: 95%;
        max-width: 400px; /* 기본 팝업 크기 복원 */
        box-shadow: 8px 8px 0 #000;
    }

    /* 사용자 등록 팝업만 크기 축소 */
    #registrationModal .pixel-box {
        max-width: 200px; /* 사용자 등록 팝업만 가로폭 절반 */
    }

    .pixel-btn {
        font-family: 'NeoDunggeunmo', monospace;
        /* Kept for Consistency in Popups? Or should revert? User said 'popup font change ONLY'. Buttons are mostly in Popups, but Nav are buttons too? Nav is div.btn. Registration is popup. Add Event is popup. Confirm is popup. */
        /* Wait, if I revert body, I should explicitly set Neo for buttons if they are in popups. But generic .pixel-btn is used in popups. */
        background: var(--btn-purple);
        border: 2px solid #fff;
        color: white;
        padding: 10px;
        box-shadow: 4px 4px 0 #000;
        cursor: pointer;
    }

    .pixel-btn:active {
        box-shadow: 0 0 0 #000;
        transform: translate(4px, 4px);
    }

    .pixel-btn:disabled {
        background: #666; /* 회색 배경 */
        color: #aaa; /* 회색 텍스트 */
        cursor: not-allowed; /* 커서 변경 */
        opacity: 0.6; /* 투명도 */
    }

    .pixel-input {
        font-family: 'NeoDunggeunmo', monospace;
        background: #1a1a2e;
        border: 2px solid #555;
        color: white;
        padding: 8px;
        width: 100%;
        margin-top: 5px;
        font-size: 14px;
    }

    .photo-options {
        display: flex;
        gap: 10px;
        margin-top: 5px;
    }

    .photo-btn {
        background: #4a4a6a;
        border: 2px solid #fff;
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        box-shadow: 2px 2px 0 #000;
    }

    .photo-btn:hover {
        background: #5a5a7a;
    }

    .photo-btn:active {
        box-shadow: 0 0 0 #000;
        transform: translate(2px, 2px);
    }

    /* Modal content centering */
    .modal-content {
        text-align: center; /* 메뉴들 가운데 정렬 */
    }

    /* Input group layout */
    .input-group {
        margin-bottom: 20px;
        text-align: left;
        display: block;
        width: 160px; /* 저장하기 버튼과 동일한 가로폭 제한 */
    }

    .input-group label {
        display: block;
        margin-bottom: 8px; /* 레이블과 입력 필드 사이 간격 */
    }

    .input-group .file-upload-wrapper {
        text-align: left; /* 사진 옵션들도 좌측 정렬 */
    }

    /* Name input width */
    .name-input {
        width: 150px; /* 가로폭 10px 늘림 */
    }

    /* Photo preview styling */
    .photo-preview-box {
        display: block;
        width: 150px; /* 가로폭 10px 늘림 */
        height: 120px;
        border: 2px solid #555;
        border-radius: 8px;
        background-color: #1a1a2e;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        margin: 10px 0 0;
        text-align: center;
        line-height: 120px;
        color: #888;
        font-size: 10px;
    }

    /* --- Day Modal: List View Styles --- */
    .day-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 4px solid #fff;
        padding-bottom: 10px;
    }

    .day-modal-date {
        font-size: 1.2rem;
        color: var(--accent-yellow);
    }

    .event-list-container {
        max-height: none; /* 반응형 높이 */
        overflow-y: visible; /* 스크롤 제거 */
    }

    .event-item {
        background: rgba(0, 0, 0, 0.2);
        margin-bottom: 8px;
        padding: 8px;
        border: 2px solid transparent;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .event-item.active {
        border-color: var(--accent-yellow);
        background: rgba(255, 255, 255, 0.1);
    }

    .event-info {
        flex-grow: 1;
    }

    .event-actions {
        display: none;
        /* Hidden by default */
        gap: 8px;
    }

    .event-item.active .event-actions {
        display: flex;
        animation: fadeIn 0.2s;
    }

    .action-icon {
        cursor: pointer;
        font-size: 1.2rem;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    /* Confirm Modal */
    .confirm-overlay {
        position: absolute;
        /* Relative to app container or fixed */
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 200;
    }

    .confirm-box {
        background: var(--bg-color);
        border: 4px solid #fff;
        padding: 20px;
        text-align: center;
        box-shadow: 8px 8px 0 #000;
    }

    /* Event Form Styles */
    .event-form-group {
        margin-bottom: 15px;
        text-align: left;
    }

    .event-form-label {
        display: block;
        color: var(--accent-yellow);
        margin-bottom: 5px;
        font-size: 0.8rem;
        font-weight: normal;
        /* Reduce thickness key */
        text-shadow: none;
        /* Remove shadow to make it look thinner */
    }

    .date-time-row {
        display: flex;
        gap: 5px;
    }

    .date-time-row input {
        width: 50%;
    }

    /* Color Picker: 5 columns for 10 items = 2 rows */
    .color-picker-container {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        justify-items: center;
        gap: 8px;
        margin-top: 5px;
    }

    .color-option {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 2px solid #fff;
        cursor: pointer;
        box-shadow: 2px 2px 0 #000;
    }

    .color-option.selected {
        border-color: #000;
        box-shadow: 0 0 0 2px #fff inset;
        transform: scale(1.1);
    }

    /* Alarm Input */
    .alarm-input-wrapper {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
    }

    .alarm-input {
        width: 60px;
        text-align: center;
    }

    .alarm-input:disabled {
        background-color: #333;
        color: #777;
        border-color: #444;
        cursor: not-allowed;
    }

    .modal-header {
        display: flex;
        justify-content: space-between; /* 좌우 정렬 */
        align-items: center;
        margin-bottom: 20px;
    }

    #eventAlarmToggle {
        transform: scale(1.5);
        /* 2px bigger roughly 1.5x from default */
        margin-left: 5px;
        /* Closer to text */
        cursor: pointer;
    }

    /* Calendar Card Event List Items */
    .day-preview-list {
        list-style: none;
        padding: 0;
        margin: 1px 0 0 0; /* 간격 약간 줄임 */
    }

    .day-preview-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: clip;
        /* We truncate manually to 5 chars, but this is safety */
        font-family: 'NeoDunggeunmo', monospace;
        font-size: 9px; /* 폰트 사이즈 9px */
        font-weight: 200; /* 굵기 더 줄임 */
        margin-bottom: 1px;
        line-height: 1.2;
        /* 배경색은 JavaScript에서 동적으로 설정 */
        padding: 1px 3px 1px 2px; /* 좌측 패딩 2px */
        border-radius: 2px;
        width: 100%; /* 일별 카드 전체 가로폭 사용 */
        box-sizing: border-box; /* 패딩 포함한 전체 크기 */
        letter-spacing: -0.7px; /* 자간 더 좁힘 */
        text-align: center; /* 텍스트 가운데 정렬 */
        text-align: left; /* 텍스트 좌측 정렬 */
    }

    .more-events-label {
        font-size: 8px;
        color: #8B008B; /* 짙은 자주색 */
        margin-top: 2px;
        text-align: right;
    }
</style>